{% if sub_request.status == "Open" %}
    <button id="accept-btn" class="btn btn-accept" onclick="acceptRequest()">Accept This Sub Position</button>
{% else %}
    <button class="btn btn-disabled" disabled>Position Filled</button>
{% endif %}

<style>
    /* Make the button take 1/4 of the screen width */
    .btn {
        width: 25%; /* 1/4 of the screen width */
        font-size: 1.5em; /* Increase font size */
        padding: 15px 25px; /* Adjust padding as needed */
        text-align: center; /* Ensure text is properly aligned */
        border-radius: 8px; /* Optional: rounded corners */
    }

    /* Additional specific styles for the buttons */
    .btn-accept {
        background-color: #28a745; /* Green color */
        color: white; /* White text */
        border: none; /* Remove border */
    }

    .btn-disabled {
        background-color: #d6d6d6; /* Gray color for disabled state */
        color: black; /* Black text color */
        border: none; /* Remove border */
    }

    /* Ensure disabled buttons maintain consistent look */
    .btn:disabled {
        cursor: not-allowed;
    }
</style>

<script>
    function acceptRequest() {
        var button = document.getElementById("accept-btn");
        button.innerText = "Processing...";
        button.disabled = true;

        fetch("{{ url_for('accept_sub_request', token=sub_request.token) }}", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === "success") {
                button.innerText = "Position Filled";
                button.classList.remove("btn-accept");
                button.classList.add("btn-disabled");
            } else {
                alert(data.message);
                button.innerText = "Accept This Sub Position";
                button.disabled = false;
            }
        })
        .catch(error => {
            alert("An error occurred. Please try again.");
            console.error("Error:", error);
            button.innerText = "Accept This Sub Position";
            button.disabled = false;
        });
    }
</script>